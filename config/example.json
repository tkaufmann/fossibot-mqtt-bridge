{
  "_comment": "Development configuration example",
  "_comment_usage": "Copy to config/config.json for local development",
  "_comment_production": "For production/Docker, see config/production.example.json",

  "accounts": [
    {
      "email": "user@example.com",
      "password": "your-password-here",
      "enabled": true
    }
  ],

  "mosquitto": {
    "host": "localhost",
    "port": 1883,
    "username": null,
    "password": null,
    "client_id": "fossibot_bridge"
  },

  "daemon": {
    "_comment": "Relative paths OK for development, will be resolved to project root",
    "log_file": "logs/bridge.log",
    "log_level": "info",
    "pid_file": "bridge.pid"
  },

  "health": {
    "_comment": "Enable health endpoint on port 8080 (required for Docker health checks)",
    "enabled": true,
    "port": 8080
  },
  "cache": {
    "directory": "/var/lib/fossibot",
    "token_ttl_safety_margin": 300,
    "max_token_ttl": 86400,
    "_comment_max_token_ttl": "Cap token cache TTL to 1 day (86400s) regardless of JWT expiry",
    "device_list_ttl": 86400,
    "device_refresh_interval": 86400
  },
  "bridge": {
    "status_publish_interval": 60,
    "device_poll_interval": 60,
    "_comment_device_poll_interval": "Poll device state every 60s (devices don't send spontaneous cloud updates)",
    "reconnect_delay_min": 5,
    "reconnect_delay_max": 60,
    "proactive_token_refresh": {
      "_comment": "Proactively check and refresh MQTT tokens before they expire",
      "enabled": true,
      "check_interval": 1800,
      "_comment_check_interval": "Check every 30 minutes (1800s)",
      "safety_margin": 3600,
      "_comment_safety_margin": "Refresh if token expires within 1 hour (3600s)"
    },
    "data_flow_watchdog": {
      "_comment": "Detect stale device connections by monitoring data flow (fallback for polling)",
      "enabled": true,
      "check_interval": 120,
      "_comment_check_interval": "Check every 2 minutes (120s)",
      "stale_threshold": 900,
      "_comment_stale_threshold": "Trigger reconnect if no updates for 15 minutes (900s)"
    }
  },
  "debug": {
    "log_raw_registers": false,
    "log_update_source": false
  }
}